# JavaScript MCP Integration Test Configuration
# Optimized for MCP testing with simplified server config
port: ${TEST_PORT}
timeout: "22s"
max_concurrent_requests: 50
project_aware: true

# Single JavaScript server for MCP testing
servers:
  - name: "typescript-language-server"
    languages: ["javascript", "typescript"]
    command: "typescript-language-server"
    args: ["--stdio"]
    transport: "stdio"
    root_markers: ["package.json", "tsconfig.json"]
    
    settings:
      typescript:
        preferences:
          includeCompletionsForModuleExports: true
        suggest:
          enabled: true
      javascript:
        preferences:
          includeCompletionsForModuleExports: true
        suggest:
          enabled: true
    
    environment:
      NODE_PATH: "${workspaceFolder}/node_modules"
      TS_NODE_PROJECT: "tsconfig.json"

# MCP-specific configuration
mcp:
  enabled: true
  tools:
    - "textDocument/definition"
    - "textDocument/references"
    - "textDocument/hover"
    - "textDocument/documentSymbol"
    - "workspace/symbol"
    - "textDocument/completion"
  
  transport:
    type: "stdio"
    timeout: "22s"
    
  protocol:
    version: "2025-06-18"
    capabilities:
      tools: true

# Test settings
test_settings:
  timeouts:
    server_startup: "18s"
    lsp_request: "8s"
    
  performance:
    max_response_time_ms: 8000
    max_memory_usage_mb: 512
    
  file_patterns:
    include:
      - "source/**/*.js"
      - "*.js"
    exclude:
      - "node_modules/**"
      - ".git/**"